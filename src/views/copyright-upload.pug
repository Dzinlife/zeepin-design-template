extends ./layouts/main.pug

block locals
  - var pid = 'copyright-upload'

block styles
  link(rel='stylesheet', type='text/css', href='/static/css/copyright-upload.css')

block header
  include ./components/header.pug
  +header('logined', 1)

block footer
  include ./components/footer.pug
  
block content
  .width-limit
    .panel.panel-default.copyright-upload
      .panel-heading
        .copyright-step.active
          .copyright-step-bullet 1
          | 上传文件
        .copyright-step
          .copyright-step-bullet 2
          | 版权信息
        .copyright-step
          .copyright-step-bullet 3
          | 申请证书
      .panel-body
        form
          .column-wrapper
            .column-left
              label.upload-area
                img.upload-area-icon(src="/static/imgs/upload-area-icon.svg")
                .upload-area-text 点击上传
                input(type="file")
              table
                tr
                  td
                    label.copyright-type-radio
                      input(type="radio" name="copyright-type" onchange="copyrightTypeRadioOriginal()")
                      | 本人原创
                  td
                    label.copyright-rule-accept
                      input#copyright-rule-input(type="checkbox" disabled checked)
                      span 同意
                      a(href="#") 智品承诺书
                tr
                  td
                    label.copyright-type-radio
                      input(type="radio" name="copyright-type" onchange="copyrightTypeRadioAgency()")
                      | 代理人
                  td
                    input#copyright-owner-name-input(type="text" placeholder="填写权利人姓名" disabled)
                  td
                    label.copyright-licence-upload.disabled
                      #licence-upload-button 上传授权文件
                      input#copyright-licence-input(type="file" onchange="uploadLicenceFileSelected.bind(this)()" disabled)
            .column-right
              .file-upload-list-heading
                h3 文件传输列表
                span.file-upload-list-heading-progress 完成 1/3
              ul.file-upload-list-body
                li
                  .file-upload-list-bullet
                  .file-upload-list-content
                    .file-upload-list-name v2-8b5dc25806b38ab2b84fe45acacc9040_b.jpg
                  .file-upload-list-delete
                li
                  .file-upload-list-bullet
                  .file-upload-list-content
                    .file-upload-list-name DCxQYiUU0AAc5J1.jpg-orig.jpeg
                    .progress
                      .progress-bar(style="width: 60%")
                  .file-upload-list-delete
                li
                  .file-upload-list-bullet
                  .file-upload-list-content
                    .file-upload-list-name v2-68dc038c85435f2b61623d0087e8021f_b.jpg
                    .progress
                      .progress-bar(style="width: 60%")
                  .file-upload-list-delete
          .line
          button.btn.btn-sm.btn-primary.next-step(type="submit") 下一步

block scripts
  script.
    // 选择本人原创
    function copyrightTypeRadioOriginal(){
      document.getElementById('copyright-rule-input').disabled = false

      document.getElementById('copyright-owner-name-input').disabled = true
      document.getElementById('copyright-licence-input').disabled = true

      document.querySelector('label.copyright-licence-upload').classList.add("disabled")
    }

    // 选择代理人
    function copyrightTypeRadioAgency(){
      document.getElementById('copyright-rule-input').disabled = true

      document.getElementById('copyright-owner-name-input').disabled = false
      document.getElementById('copyright-licence-input').disabled = false

      document.querySelector('label.copyright-licence-upload').classList.remove("disabled")
    }

    // 授权文件名显示
    function uploadLicenceFileSelected(){
      if (this.files && this.files[0]) {
        document.getElementById('licence-upload-button').innerHTML = "授权文件: " + this.files[0].name
      }
    }

