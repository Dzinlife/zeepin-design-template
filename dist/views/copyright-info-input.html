<!DOCTYPE html>
<html>
  <head>
    <title>智品 - Zeepin</title>
    <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/static/css/main.css">
    <link rel="stylesheet" type="text/css" href="/static/css/bootstrap-tokenfield.min.css">
    <link rel="stylesheet" type="text/css" href="/static/css/copyright-info-input.css">
  </head>
  <body id="copyright-info-input">
        <nav class="navbar navbar-default">
          <div class="container-fluid">
            <div class="navbar-header"><a class="navbar-brand" href="/"><img src="/static/imgs/logo.svg"></a></div>
            <ul class="nav navbar-nav tabs">
              <li><a href="#">暂存区</a></li>
              <li class="active"><a href="/copyright-protect">版权保护</a></li>
              <li class="market"><a href="#"><img src="/static/imgs/copyright-market-icon.svg">版权市场</a></li>
            </ul>
            <ul class="nav navbar-nav account">
              <li class="cart"><a class="navbar-link" href="/register"><img class="navbar-cart-icon" src="/static/imgs/header-cart-icon.svg">购物车</a></li>
              <li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">
                  <div class="navbar-avatar"></div><span class="navbar-avatar-name">这是个比较长的用户名</span><span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="#">退出登录</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </nav>
    <div class="width-limit">
      <div class="panel panel-default copyright-info-input">
        <div class="panel-heading">
          <div class="copyright-step finish">
            <div class="copyright-step-bullet">1</div>上传文件
          </div>
          <div class="copyright-step active">
            <div class="copyright-step-bullet">2</div>版权信息
          </div>
          <div class="copyright-step">
            <div class="copyright-step-bullet">3</div>申请证书
          </div>
        </div>
        <div class="panel-body">
          <form>
            <div class="block-wrapper">
              <h3>信息录入</h3>
              <div class="subtitle">填写版权基本信息，方便日后维权</div>
              <div class="information-input-container">
                <div class="information-input-column-left">
                  <div id="image-cropper">
                    <div class="cropit-preview"></div>
                    <div class="image-control-wrapper">
                      <div class="rotate-ccw-btn"></div>
                      <div class="rotate-cw-btn"></div>
                      <input class="cropit-image-zoom-input" type="range">
                    </div>
                    <label class="cropit-image-input-btn"><span>更换略缩图</span>
                      <input class="cropit-image-input" type="file">
                    </label>
                  </div>
                </div>
                <div class="information-input-column-right">
                  <input placeholder="图片名">
                  <textarea class="description" placeholder="图片描述"></textarea>
                  <textarea id="tags-input" type="text" placeholder="标签"></textarea>
                </div>
              </div>
            </div>
            <div class="line">
              <div class="fold-page expe"></div>
            </div>
            <div class="line"></div>
            <div class="block-wrapper">
              <label class="accept-service-rule">
                <input type="checkbox" checked>同意<a href="#">数字作品版权服务协议</a>
              </label>
              <button class="btn btn-sm btn-primary next-step" type="submit">下一步</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="website-footer">
      <div class="width-limit">
        <div class="website-footer-left-column">
          <div class="website-footer-logo-area">
            <div class="website-footer-logo"><img src="/static/imgs/logo-footer.svg"><span class="website-footer-sologan">区块链版权保护与交易</span></div>
          </div>
          <div class="website-footer-icp">沪ICP备16040562号-1</div>
          <div class="website-footer-copyright">© 2016-2017 Zeepin.com. All rights reserved. 智品忘行空  版权所有 保留一切权利</div>
        </div>
        <div class="website-footer-right-column">
          <div class="website-footer-links"><a href="#">服务条款</a><a href="#">联系我们</a><a href="#">团队博客</a><a href="#">关于智品</a></div>
          <div class="website-footer-counter"><span class="copyright-counter-number">302,153</span>copyrights protected</div>
        </div>
      </div>
    </div>
    <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cropit.js"></script>
    <script src="/static/js/bootstrap-tokenfield.min.js"></script>
    <script>
      //初始化标签输入框
      //控件文档 http://sliptree.github.io/bootstrap-tokenfield/
      var $tagsInput = $('#tags-input')
      $tagsInput.tokenfield({
        delimiter: " " //以空格作为区分
      })
      
      //获取已输入的标签
      function getTokens(){
        return $tagsInput.tokenfield('getTokens')
      }
      
      
      var $imageCropper = $('#image-cropper')
      //初始化图片裁剪
      $imageCropper.cropit()
      
      //默认缩略图
      $imageCropper.cropit('imageSrc', 'http://placekitten.com/g/1280/800')
      
      //绑定旋转略缩图按钮
      $('.rotate-cw-btn').click(function() {
        $('#image-cropper').cropit('rotateCW')
      })
      $('.rotate-ccw-btn').click(function() {
        $('#image-cropper').cropit('rotateCCW')
      })
      
      //获取裁剪图片的 dataUrl
      function getCropedImage(){
        return $imageCropper.cropit('export')
      }
      
      //dataURL 转换为 Blob 对象
      function dataURItoBlob(dataURI) {
        var byteString
        if (dataURI.split(',')[0].indexOf('base64') >= 0)
          byteString = atob(dataURI.split(',')[1])
        else
          byteString = unescape(dataURI.split(',')[1])
        var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]
        var ia = new Uint8Array(byteString.length)
        for (var i = 0; i < byteString.length; i++) {
          ia[i] = byteString.charCodeAt(i)
        }
        return new Blob([ia], {type:mimeString})
      }
      
      //提交表单时用来获取裁剪后图片的方法
      function getCropedImageFormData(){
        var dataURL = getCropedImage()
        var blob = dataURItoBlob(dataURL)
        return blob
      }
    </script>
  </body>
</html>